#!/usr/bin/env bash
set -e  # Exit on error

# Convert to array using comma as separator
STOW_FOLDERS=${STOW_FOLDERS:-"alacritty,hypr,i3,nvim,tmux,waybar,zsh,scripts"}
IFS=',' read -r -a folders <<< "$STOW_FOLDERS"

echo ""
echo "ðŸ”§ Starting dotfile stow process..."
echo ""

for folder in "${folders[@]}"; do
    if [[ -d "$folder" ]]; then
        echo "âœ… Stowing: $folder"
        stow -D -t "$HOME" "$folder"
        stow -t "$HOME" "$folder"
    else
        echo "âŒ Skipping: $folder (not found in $(pwd))"
    fi
done

echo ""
echo "[Info] Done"

